<!-- Code generated by gomarkdoc. DO NOT EDIT -->

# async

```go
import "github.com/autom8ter/async/v1"
```

Package async is a package for asynchronous programming in Go.

It provides a set of primitives for safely building concurrent applications that don't leak resources or deadlock.

## Index

- [type Borrower](<#Borrower>)
  - [func NewBorrower\[T any\]\(value T\) \*Borrower\[T\]](<#NewBorrower>)
  - [func \(b \*Borrower\[T\]\) Borrow\(\) \*T](<#Borrower[T].Borrow>)
  - [func \(b \*Borrower\[T\]\) BorrowContext\(ctx context.Context\) \(\*T, error\)](<#Borrower[T].BorrowContext>)
  - [func \(b \*Borrower\[T\]\) Close\(\) error](<#Borrower[T].Close>)
  - [func \(b \*Borrower\[T\]\) Do\(fn func\(\*T\)\) error](<#Borrower[T].Do>)
  - [func \(b \*Borrower\[T\]\) Return\(obj \*T\) error](<#Borrower[T].Return>)
  - [func \(b \*Borrower\[T\]\) Swap\(value T\) error](<#Borrower[T].Swap>)
  - [func \(b \*Borrower\[T\]\) TryBorrow\(\) \(\*T, bool\)](<#Borrower[T].TryBorrow>)
  - [func \(b \*Borrower\[T\]\) Value\(\) T](<#Borrower[T].Value>)
- [type Channel](<#Channel>)
  - [func NewChannel\[T any\]\(ctx context.Context, opts ...ChannelOpt\[T\]\) \*Channel\[T\]](<#NewChannel>)
  - [func \(c \*Channel\[T\]\) Context\(\) \*MultiContext](<#Channel[T].Context>)
  - [func \(c \*Channel\[T\]\) ProxyFrom\(ctx context.Context, ch \*Channel\[T\]\)](<#Channel[T].ProxyFrom>)
  - [func \(c \*Channel\[T\]\) Send\(ctx context.Context, value T\) bool](<#Channel[T].Send>)
  - [func \(c \*Channel\[T\]\) SendAsync\(ctx context.Context, value T\) chan bool](<#Channel[T].SendAsync>)
- [type ChannelGroup](<#ChannelGroup>)
  - [func NewChannelGroup\[T any\]\(ctx context.Context\) \*ChannelGroup\[T\]](<#NewChannelGroup>)
  - [func \(b \*ChannelGroup\[T\]\) Channel\(ctx context.Context, opts ...ChannelOpt\[T\]\) \*ChannelReceiver\[T\]](<#ChannelGroup[T].Channel>)
  - [func \(b \*ChannelGroup\[T\]\) Close\(\)](<#ChannelGroup[T].Close>)
  - [func \(c \*ChannelGroup\[T\]\) Len\(\) int](<#ChannelGroup[T].Len>)
  - [func \(cg \*ChannelGroup\[T\]\) Send\(ctx context.Context, val T\)](<#ChannelGroup[T].Send>)
  - [func \(cg \*ChannelGroup\[T\]\) SendAsync\(ctx context.Context, val T\) chan bool](<#ChannelGroup[T].SendAsync>)
- [type ChannelOpt](<#ChannelOpt>)
  - [func WithBufferSize\[T any\]\(bufferSize int\) ChannelOpt\[T\]](<#WithBufferSize>)
  - [func WithOnClose\[T any\]\(fn func\(ctx context.Context\)\) ChannelOpt\[T\]](<#WithOnClose>)
  - [func WithOnRcv\[T any\]\(fn func\(context.Context, T\) T\) ChannelOpt\[T\]](<#WithOnRcv>)
  - [func WithOnSend\[T any\]\(fn func\(context.Context, T\) T\) ChannelOpt\[T\]](<#WithOnSend>)
  - [func WithWhere\[T any\]\(fn func\(context.Context, T\) bool\) ChannelOpt\[T\]](<#WithWhere>)
- [type ChannelReceiver](<#ChannelReceiver>)
  - [func \(c \*ChannelReceiver\[T\]\) Close\(ctx context.Context\)](<#ChannelReceiver[T].Close>)
  - [func \(c \*ChannelReceiver\[T\]\) ForEach\(ctx context.Context, fn func\(context.Context, T\) bool\)](<#ChannelReceiver[T].ForEach>)
  - [func \(c \*ChannelReceiver\[T\]\) ForEachAsync\(ctx context.Context, fn func\(context.Context, T\) bool\)](<#ChannelReceiver[T].ForEachAsync>)
  - [func \(c \*ChannelReceiver\[T\]\) Len\(\) int](<#ChannelReceiver[T].Len>)
  - [func \(c \*ChannelReceiver\[T\]\) ProxyTo\(ctx context.Context, ch \*Channel\[T\]\)](<#ChannelReceiver[T].ProxyTo>)
  - [func \(c \*ChannelReceiver\[T\]\) Recv\(ctx context.Context\) \(T, bool\)](<#ChannelReceiver[T].Recv>)
- [type MultiContext](<#MultiContext>)
  - [func NewMultiContext\(ctx context.Context\) \*MultiContext](<#NewMultiContext>)
  - [func \(m \*MultiContext\) Cancel\(\)](<#MultiContext.Cancel>)
  - [func \(m \*MultiContext\) WithCloser\(fn func\(\)\)](<#MultiContext.WithCloser>)
  - [func \(m \*MultiContext\) WithContext\(ctx context.Context\) context.Context](<#MultiContext.WithContext>)


<a name="Borrower"></a>
## type [Borrower](<https://github.com/autom8ter/async/blob/main/async.go#L151-L157>)

Borrower is a thread\-safe object that can be borrowed and returned.

```go
type Borrower[T any] struct {
    // contains filtered or unexported fields
}
```

<a name="NewBorrower"></a>
### func [NewBorrower](<https://github.com/autom8ter/async/blob/main/async.go#L160>)

```go
func NewBorrower[T any](value T) *Borrower[T]
```

NewBorrower returns a new Borrower with the provided value.

<a name="Borrower[T].Borrow"></a>
### func \(\*Borrower\[T\]\) [Borrow](<https://github.com/autom8ter/async/blob/main/async.go#L173>)

```go
func (b *Borrower[T]) Borrow() *T
```

Borrow returns the value of the Borrower. If the value is not available, it will block until it is.

<a name="Borrower[T].BorrowContext"></a>
### func \(\*Borrower\[T\]\) [BorrowContext](<https://github.com/autom8ter/async/blob/main/async.go#L191>)

```go
func (b *Borrower[T]) BorrowContext(ctx context.Context) (*T, error)
```

BorrowContext returns the value of the Borrower. If the value is not available, it will block until it is or the context is canceled.

<a name="Borrower[T].Close"></a>
### func \(\*Borrower\[T\]\) [Close](<https://github.com/autom8ter/async/blob/main/async.go#L246>)

```go
func (b *Borrower[T]) Close() error
```

Close closes the Borrower and prevents it from being borrowed again. If the Borrower is still borrowed, it will return an error. Close is idempotent.

<a name="Borrower[T].Do"></a>
### func \(\*Borrower\[T\]\) [Do](<https://github.com/autom8ter/async/blob/main/async.go#L228>)

```go
func (b *Borrower[T]) Do(fn func(*T)) error
```

Do borrows the value, calls the provided function, and returns the value.

<a name="Borrower[T].Return"></a>
### func \(\*Borrower\[T\]\) [Return](<https://github.com/autom8ter/async/blob/main/async.go#L208>)

```go
func (b *Borrower[T]) Return(obj *T) error
```

Return returns the value to the Borrower so it can be borrowed again. If the value is not a pointer to the value that was borrowed, it will return an error. If the value has already been returned, it will return an error.

<a name="Borrower[T].Swap"></a>
### func \(\*Borrower\[T\]\) [Swap](<https://github.com/autom8ter/async/blob/main/async.go#L235>)

```go
func (b *Borrower[T]) Swap(value T) error
```

Swap borrows the value, swaps it with the provided value, and returns the value to the Borrower.

<a name="Borrower[T].TryBorrow"></a>
### func \(\*Borrower\[T\]\) [TryBorrow](<https://github.com/autom8ter/async/blob/main/async.go#L178>)

```go
func (b *Borrower[T]) TryBorrow() (*T, bool)
```

TryBorrow returns the value of the Borrower if it is available. If the value is not available, it will return false.

<a name="Borrower[T].Value"></a>
### func \(\*Borrower\[T\]\) [Value](<https://github.com/autom8ter/async/blob/main/async.go#L223>)

```go
func (b *Borrower[T]) Value() T
```

Value returns the value of the Borrower. This is a non\-blocking operation since the value is not borrowed\(non\-pointer\).

<a name="Channel"></a>
## type [Channel](<https://github.com/autom8ter/async/blob/main/async.go#L286-L289>)

Channel is a safer version of a channel that can be closed and has a context to prevent sending or receiving when the context is canceled.

```go
type Channel[T any] struct {
    // contains filtered or unexported fields
}
```

<a name="NewChannel"></a>
### func [NewChannel](<https://github.com/autom8ter/async/blob/main/async.go#L339>)

```go
func NewChannel[T any](ctx context.Context, opts ...ChannelOpt[T]) *Channel[T]
```

NewChannel returns a new Channel with the provided options. The channel will be closed when the context is cancelled.

<a name="Channel[T].Context"></a>
### func \(\*Channel\[T\]\) [Context](<https://github.com/autom8ter/async/blob/main/async.go#L370>)

```go
func (c *Channel[T]) Context() *MultiContext
```

Context returns the context of the channel.

<a name="Channel[T].ProxyFrom"></a>
### func \(\*Channel\[T\]\) [ProxyFrom](<https://github.com/autom8ter/async/blob/main/async.go#L447>)

```go
func (c *Channel[T]) ProxyFrom(ctx context.Context, ch *Channel[T])
```

ProxyFrom proxies values from the given channel to this channel. This is a non\-blocking call.

<a name="Channel[T].Send"></a>
### func \(\*Channel\[T\]\) [Send](<https://github.com/autom8ter/async/blob/main/async.go#L404>)

```go
func (c *Channel[T]) Send(ctx context.Context, value T) bool
```

Send sends a value to the channel. If the channel is closed or the context is cancelled, it will return false. If the value is sent, it will return true. This is a blocking call.

<a name="Channel[T].SendAsync"></a>
### func \(\*Channel\[T\]\) [SendAsync](<https://github.com/autom8ter/async/blob/main/async.go#L378>)

```go
func (c *Channel[T]) SendAsync(ctx context.Context, value T) chan bool
```

SendAsync sends a value to the channel in a goroutine. If the channel is closed, it will return false to the channel returned by this function. If the context is canceled, it will return false to the channel returned by this function. If the value is sent, it will return true to the channel returned by this function. This is a non\-blocking call.

<a name="ChannelGroup"></a>
## type [ChannelGroup](<https://github.com/autom8ter/async/blob/main/async.go#L19-L23>)

ChannelGroup is a thread\-safe group of channels. It is useful for broadcasting a value to multiple channels at once.

```go
type ChannelGroup[T any] struct {
    // contains filtered or unexported fields
}
```

<a name="NewChannelGroup"></a>
### func [NewChannelGroup](<https://github.com/autom8ter/async/blob/main/async.go#L27>)

```go
func NewChannelGroup[T any](ctx context.Context) *ChannelGroup[T]
```

NewChannelGroup returns a new ChannelGroup. The context is used to cancel all subscribers when the context is canceled. A channel group is useful for broadcasting a value to multiple subscribers.

<a name="ChannelGroup[T].Channel"></a>
### func \(\*ChannelGroup\[T\]\) [Channel](<https://github.com/autom8ter/async/blob/main/async.go#L66>)

```go
func (b *ChannelGroup[T]) Channel(ctx context.Context, opts ...ChannelOpt[T]) *ChannelReceiver[T]
```

Channel returns a channel that will receive values from broadcasted values. The channel will be closed when the context is canceled. This is a non\-blocking operation.

<a name="ChannelGroup[T].Close"></a>
### func \(\*ChannelGroup\[T\]\) [Close](<https://github.com/autom8ter/async/blob/main/async.go#L90>)

```go
func (b *ChannelGroup[T]) Close()
```

Close blocks until all subscribers have been removed and then closes the broadcast.

<a name="ChannelGroup[T].Len"></a>
### func \(\*ChannelGroup\[T\]\) [Len](<https://github.com/autom8ter/async/blob/main/async.go#L80>)

```go
func (c *ChannelGroup[T]) Len() int
```

Len returns the number of subscribers.

<a name="ChannelGroup[T].Send"></a>
### func \(\*ChannelGroup\[T\]\) [Send](<https://github.com/autom8ter/async/blob/main/async.go#L55>)

```go
func (cg *ChannelGroup[T]) Send(ctx context.Context, val T)
```

SendAsync sends a value to all channels in the group asynchronously. This is a non\-blocking operation.

<a name="ChannelGroup[T].SendAsync"></a>
### func \(\*ChannelGroup\[T\]\) [SendAsync](<https://github.com/autom8ter/async/blob/main/async.go#L37>)

```go
func (cg *ChannelGroup[T]) SendAsync(ctx context.Context, val T) chan bool
```

SendAsync sends a value to all channels in the group asynchronously. This is a non\-blocking operation.

<a name="ChannelOpt"></a>
## type [ChannelOpt](<https://github.com/autom8ter/async/blob/main/async.go#L300>)

ChannelOpt is an option for creating a new Channel.

```go
type ChannelOpt[T any] func(*channelOpts[T])
```

<a name="WithBufferSize"></a>
### func [WithBufferSize](<https://github.com/autom8ter/async/blob/main/async.go#L303>)

```go
func WithBufferSize[T any](bufferSize int) ChannelOpt[T]
```

WithBufferSize sets the buffer size of the channel.

<a name="WithOnClose"></a>
### func [WithOnClose](<https://github.com/autom8ter/async/blob/main/async.go#L331>)

```go
func WithOnClose[T any](fn func(ctx context.Context)) ChannelOpt[T]
```

WithOnClose adds a function to be called before the channel is closed.

<a name="WithOnRcv"></a>
### func [WithOnRcv](<https://github.com/autom8ter/async/blob/main/async.go#L317>)

```go
func WithOnRcv[T any](fn func(context.Context, T) T) ChannelOpt[T]
```

WithOnRcv adds a function to be called before receiving a value.

<a name="WithOnSend"></a>
### func [WithOnSend](<https://github.com/autom8ter/async/blob/main/async.go#L310>)

```go
func WithOnSend[T any](fn func(context.Context, T) T) ChannelOpt[T]
```

WithOnSend adds a function to be called before sending a value.

<a name="WithWhere"></a>
### func [WithWhere](<https://github.com/autom8ter/async/blob/main/async.go#L324>)

```go
func WithWhere[T any](fn func(context.Context, T) bool) ChannelOpt[T]
```

WithWhere adds a function to be called before sending a value to determine if the value should be sent.

<a name="ChannelReceiver"></a>
## type [ChannelReceiver](<https://github.com/autom8ter/async/blob/main/async.go#L274-L283>)

ChannelReceiver is a receiver for a channel.

```go
type ChannelReceiver[T any] struct {
    // contains filtered or unexported fields
}
```

<a name="ChannelReceiver[T].Close"></a>
### func \(\*ChannelReceiver\[T\]\) [Close](<https://github.com/autom8ter/async/blob/main/async.go#L515>)

```go
func (c *ChannelReceiver[T]) Close(ctx context.Context)
```

Close closes the channel. It will call the OnClose functions and wait for all goroutines to finish. If the context is cancelled, waiting for goroutines to finish will be cancelled.

<a name="ChannelReceiver[T].ForEach"></a>
### func \(\*ChannelReceiver\[T\]\) [ForEach](<https://github.com/autom8ter/async/blob/main/async.go#L483>)

```go
func (c *ChannelReceiver[T]) ForEach(ctx context.Context, fn func(context.Context, T) bool)
```

ForEach calls the given function for each value in the channel until the channel is closed, the context is cancelled, or the function returns false.

<a name="ChannelReceiver[T].ForEachAsync"></a>
### func \(\*ChannelReceiver\[T\]\) [ForEachAsync](<https://github.com/autom8ter/async/blob/main/async.go#L497>)

```go
func (c *ChannelReceiver[T]) ForEachAsync(ctx context.Context, fn func(context.Context, T) bool)
```

ForEachAsync calls the given function for each value in the channel until the channel is closed, the context is cancelled, or the function returns false. It will call the function in a new goroutine for each value.

<a name="ChannelReceiver[T].Len"></a>
### func \(\*ChannelReceiver\[T\]\) [Len](<https://github.com/autom8ter/async/blob/main/async.go#L478>)

```go
func (c *ChannelReceiver[T]) Len() int
```

Len returns the number of values in the channel.

<a name="ChannelReceiver[T].ProxyTo"></a>
### func \(\*ChannelReceiver\[T\]\) [ProxyTo](<https://github.com/autom8ter/async/blob/main/async.go#L463>)

```go
func (c *ChannelReceiver[T]) ProxyTo(ctx context.Context, ch *Channel[T])
```

ProxyTo proxies values from this channel to the given channel. This is a non\-blocking call.

<a name="ChannelReceiver[T].Recv"></a>
### func \(\*ChannelReceiver\[T\]\) [Recv](<https://github.com/autom8ter/async/blob/main/async.go#L421>)

```go
func (c *ChannelReceiver[T]) Recv(ctx context.Context) (T, bool)
```

Recv returns the next value from the channel. If the channel is closed, it will return false.

<a name="MultiContext"></a>
## type [MultiContext](<https://github.com/autom8ter/async/blob/main/async.go#L98-L103>)

MultiContext is a context that can be used to combine contexts with a root context so they can be cancelled together.

```go
type MultiContext struct {
    context.Context
    // contains filtered or unexported fields
}
```

<a name="NewMultiContext"></a>
### func [NewMultiContext](<https://github.com/autom8ter/async/blob/main/async.go#L106>)

```go
func NewMultiContext(ctx context.Context) *MultiContext
```

NewMultiContext returns a new MultiContext.

<a name="MultiContext.Cancel"></a>
### func \(\*MultiContext\) [Cancel](<https://github.com/autom8ter/async/blob/main/async.go#L141>)

```go
func (m *MultiContext) Cancel()
```

Cancel cancels all child contexts.

<a name="MultiContext.WithCloser"></a>
### func \(\*MultiContext\) [WithCloser](<https://github.com/autom8ter/async/blob/main/async.go#L126>)

```go
func (m *MultiContext) WithCloser(fn func())
```

WithCloser adds a function to be called when the multi context is cancelled.

<a name="MultiContext.WithContext"></a>
### func \(\*MultiContext\) [WithContext](<https://github.com/autom8ter/async/blob/main/async.go#L132>)

```go
func (m *MultiContext) WithContext(ctx context.Context) context.Context
```

WithContext returns a new context that is a child of the root context. This context will be cancelled when the multi context is cancelled.

Generated by [gomarkdoc](<https://github.com/princjef/gomarkdoc>)
